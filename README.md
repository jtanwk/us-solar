# Shining a Light on U.S. Household Solar Energy Generation
An ongoing visual exploration of residential solar panel adoption.
- How does the US generate its solar energy?
- Do sunny states generate more solar energy?
- Which states have the most solar panels?
- How have states' tax incentives correlated with solar panel adoption?
- How have other factors impacting adoption changed?

[View the R Notebook here.](https://jtanwk.github.io/us-solar/)

## Dependencies

A list of R packages used in this project, sorted by purpose:

-  Data Analysis
    - `tidyverse` for everything
    - `magrittr` for extended pipe functionality
    - `lubridate` for dealing with date objects
    - `here` for OS-agnostic filepaths
    - `readxl` for reading Excel files
- Visualization
    - `ggrepel` for neater text labels
    - `gghighlight` for simpler highlighting
    - `geofacet` for arranging facets in the shape of the US
    - `ggridges` for plotting distributions over time
    - `extrafont` for... extra fonts
    - `gridExtra` for combining plots
- Geospatial tools and data
    - `sf` for geospatial data structures and operations
    - `zipcode` for geocoding by zipcode
    - `noncensus` for geocoding by state and county FIPS
    - `rnaturalearth` for US state-level shapefiles
    - `rnaturalearthdata` for high-res versions of above

## Data

### Data Sources

*Note: Datasets are omitted from repo due to large file sizes, but are all publicly available and fairly straightforward to reassemble from the links. Assembly steps are laid out in the section below.*

Dataset | Source | Description | Unit of Observation | Last downloaded | URL
--- | --- | --- | --- | --- | ---
State Energy Data Systems (SEDS) | U.S. Energy Information Administration | Data on solar photovoltaic energy generated by all U.S. sources (utility, commercial, industrial and residential sectors). Data available for 1960 - 2016. | State-year | Jan 28, 2019 | [Link to site](https://www.eia.gov/state/seds/)
OpenPV Project | National Renewable Energy Laboratory (NREL) | Database of public data for photovoltaic system (i.e. solar panel) installations in the US. Core dataset from the Lawrence Berkeley National Laboratories (LBL). Data available for 1969 - 2018. | Solar panel installation | Jan 19, 2019 | [Link to site](https://openpv.nrel.gov/about)
Solar Summaries | National Renewable Energy Laboratory (NREL) | Average solar irradiation data by state and zipcode. Data available for 1998 - 2009 | Zipcode-month | Jan 19, 2019  | [Link to site](https://www.nrel.gov/gis/data-solar.html)
Database of State Incentives for Renewables & Efficiency (DSIRE) | NC Clean Energy Technology Center, North Carolina State University | Database of incentives and policies that support renewables and energy efficiency in the US. Data available for 1975 - 2018. | Incentive or policy | Feb 6, 2019 | [Link to site](http://www.dsireusa.org/resources/data-and-tools/)
U.S. Population Data | National Cancer Institute | Aggregate dataset of Census data and annual decennial estimates of population by state, race, age, and other characteristics. Data available for 1969 - 2016. | State-year | Jan 19, 2019  | [Link to site](https://seer.cancer.gov/popdata/download.html)
Cartographic Boundary Shapefiles - Counties | U.S. Census Bureau | County-level shapefiles at 500km resolution for all census tracts in the U.S. as of 2017. | County | Feb 6, 2019 | [Link to site](https://www.census.gov/geo/maps-data/data/cbf/cbf_counties.html)

### Data Assembly

1. Raw data is downloaded from the public sources above and organized in the `/data` directory by category like so:

```bash
data
├── data-population-estimates
│   └── us.1969_2016.19ages.adjusted.txt
├── data-power-generation
│   ├── Codes_and_Descriptions.xlsx
│   └── Complete_SEDS.csv
├── data-solar-irradiance
│   └── solarsummaries.xlsx
├── data-solar-panels
│   └── openpv_all.csv
├── data-state-policies
│   └── dsire-2019-01
└── shapefiles-usa
    ├── cb_2017_us_county_500k
    └── cb_2017_us_zcta510_500k
```

2. `data-import.R` file in `/scripts` directory takes the raw data in `/data` and outputs an `.RData` file named `solar_data_master.RData`.

3. `solar_with_commentary.Rmd` loads the `.RData` file accordingly. The primary output is the `solar_with_commentary.nb.html` file that is rendered [here](https://jtanwk.github.io/us-solar/), and `.png` images of each chart is saved to `/output`.
